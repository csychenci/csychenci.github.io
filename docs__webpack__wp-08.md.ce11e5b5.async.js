(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[245],{"7L0E":function(n,e,t){"use strict";t.r(e);var l=t("q1tI"),a=t.n(l),s=t("dEAq"),r=(t("0H/f"),t("N0lm"),t("DgDr"),t("cGlH"),t("ekZX"),t("Bjia")),c=(t("tVxl"),t("1pSt"),a.a.memo((n=>{n.demos;return a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h2",{id:"\u516c\u5171\u8d44\u6e90\u5206\u79bb"},a.a.createElement(s["AnchorLink"],{to:"#\u516c\u5171\u8d44\u6e90\u5206\u79bb","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u516c\u5171\u8d44\u6e90\u5206\u79bb"),a.a.createElement("hr",null),a.a.createElement("ol",null,a.a.createElement("li",null,"\u57fa\u7840\u5e93\u5206\u79bb")),a.a.createElement("ul",null,a.a.createElement("li",null,"\u4f8b\u5982\u5728 react \u5f00\u53d1\u4e2d\uff0creact\u3001react-dom \u57fa\u7840\u5305\u662f\u5e38\u7528\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u901a\u8fc7 cdn \u5f15\u5165\uff0c\u800c\u4e0d\u6253\u5305\u5230 bundle \u4e2d")),a.a.createElement(r["a"],{code:"npm i html-webpack-externals-plugin -D",lang:"bash"}),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5148\u6765\u770b\u770b\uff0c\u672a\u63d0\u53d6\u516c\u5171\u8d44\u6e90\u524d\uff0c\u6253\u5305\u51fa\u6765\u7684 js \u6587\u4ef6\u7684\u5927\u5c0f\uff0c\u6709 4.3m")),a.a.createElement("p",null,a.a.createElement("img",{src:t("nnAj"),alt:""})),a.a.createElement("ul",null,a.a.createElement("li",null,"\u63a5\u7740\uff0c\u4f7f\u7528 html-webpack-externals \u5bf9 react\u3001react-dom \u8fdb\u884c\u63d0\u53d6\uff0c\u4ee5cdn\u7684\u65b9\u5f0f\u63d2\u5165\u5230\u9875\u9762\u4e2d")),a.a.createElement(r["a"],{code:"/** \n  * webpack.prod.js\n  * \n*/\n\nmodule.exports = {\n  plugins:[\n    new htmlWebpackExternalPlugin({\n      externals:[\n        {\n          module:'react',\n          entry:'https://now8.gtimg.com/now/lib/16.8.6/react.min.js?_bid=4042',\n          global:'React'\n        },\n        {\n          module:'react-dom',\n          entry:'https://now8.gtimg.com/now/lib/16.8.6/react-dom.min.js?_bid=4042',\n          global:'ReactDOM'\n        }\n      ]\n    })\n  ]\n}",lang:"js"}),a.a.createElement("p",null,a.a.createElement("img",{src:t("JpNl"),alt:""})),a.a.createElement("ul",null,a.a.createElement("li",null,"\u6b64\u65f6\uff0c\u5bf9\u5e94\u7684 js \u6587\u4ef6\u4e5f\u7ed9\u6211\u4eec\u81ea\u52a8\u5f15\u5165\u5230\u4e86\u9875\u9762\u4e2d")),a.a.createElement("p",null,a.a.createElement("img",{src:t("b4/2"),alt:""})),a.a.createElement("ul",null,a.a.createElement("li",null,"\u8fd8\u53ef\u4ee5\u5728\u57fa\u7840\u5305\u63d0\u53d6\u6210\u4e00\u4e2a js \u6587\u4ef6\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7 webpack \u5185\u7f6e\u7684\u63d2\u4ef6 splitChunks \u6765\u505a\u8fd9\u4e2a\u4e8b\u60c5")),a.a.createElement(r["a"],{code:"module.exports = {\n  optimization: {\n    splitChunks: {\n      cacheGroups: {\n        commons: {\n          test: /(react|react-dom)/,\n          name: 'vendors',\n          chunks: 'all'\n        }\n      }\n    }\n  },\n}",lang:"js"}),a.a.createElement("p",null,a.a.createElement("img",{src:t("OSUD"),alt:""})),a.a.createElement("ul",null,a.a.createElement("li",null,"\u53ef\u89c1\u5165\u53e3\u6587\u4ef6\u7684\u5927\u5c0f\u4e5f\u5f97\u5230\u4e86\u51cf\u5c11\uff0c\u57fa\u7840\u5e93\u88ab\u63d0\u53d6\u4e86\u6210 vendor \u6587\u4ef6\u3002\u9664\u4e86\u63d0\u53d6\u7b2c\u4e09\u65b9\u6a21\u5757\u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u5206\u79bb\u9875\u9762\u516c\u5171\u6587\u4ef6")),a.a.createElement(r["a"],{code:'/** \n  * minChunks: \u8bbe\u7f6e\u6a21\u5757\u6700\u5c0f\u88ab\u5f15\u7528\u6b21\u6570\uff0c\u8d85\u8fc7\u8fd9\u4e2a\u6570\u5b57\u5373\u5c06\u8be5\u6a21\u5757\u5206\u79bb\n  * minSize\uff1a\u5206\u79bb\u7684\u5305\u7684\u4f53\u79ef\u5927\u4e8e\u8bbe\u7f6e\u7684\u503c\uff0c\u65e2\u5c06\u8be5\u6a21\u5757\u5206\u79bb\n  * name: \u8868\u793a\u62bd\u79bb\u51fa\u6765\u7684 chunkname\n*/\nmodule.exports = {\n  optimization:{\n    splitChunks:{\n      minSize:0,\n      cacheGroups:{\n        common:{\n          name:"common",\n          chunks:"all",\n          minChunks:2\n        },\n        vendors:{\n          name:"vendors",\n          chunks:"all",\n          test: /[\\\\/]node_modules[\\\\/]/,\n        }\n      }\n    }\n  }\n}',lang:"js"}),a.a.createElement(r["a"],{code:"/**\n  * webpack.prod.js\n */\nconst path = require('path');\nconst glob = require('glob')\nconst MiniCssExtractPlugin = require('mini-css-extract-plugin')\nconst OptimizeCssAssetsPlugin = require('optimize-css-assets-webpack-plugin');\nconst HtmlWebpackPlugin = require('html-webpack-plugin');\nconst TerserPlugin = require('terser-webpack-plugin');\nconst { CleanWebpackPlugin } = require('clean-webpack-plugin');\nconst htmlWebpackExternalPlugin = require('html-webpack-externals-plugin')\n\nconst matchFile = () => {\n  const entry = {};\n  const htmlWebpackPlguins = [];\n\n  const entryFiles = glob.sync('./src/*/index.js')\n\n  Object.keys(entryFiles).map(key => {\n    const entryFile = entryFiles[key];\n\n    const chunkName = entryFile.match(/src\\/(.*)\\/index\\.js/);\n\n    entry[chunkName[1]] = entryFile;\n\n    htmlWebpackPlguins.push(new HtmlWebpackPlugin({\n      template: path.join(__dirname, `src/${chunkName[1]}/index.html`),\n      filename: `${chunkName[1]}.html`,\n      chunks: ['vendors', 'common', chunkName[1]],\n      inject: true,\n      minify: {\n        html5: true,\n        collapseWhitespace: true,\n        preserveLineBreaks: false,\n        minifyCSS: true,\n        minifyJS: true,\n        removeComments: false\n      }\n    })\n    )\n  })\n\n  return {\n    entry,\n    htmlWebpackPlguins\n  }\n}\n\nconst {\n  entry,\n  htmlWebpackPlguins\n} = matchFile()\n\nmodule.exports = {\n  mode: 'production',\n  entry: entry,\n  output: {\n    filename: \"[name]_[chunkhash:8].js\",\n    path: __dirname + '/dist'\n  },\n  optimization: {\n    minimizer: [\n      new OptimizeCssAssetsPlugin({\n        assetNameRegExp: /\\.css$/g,\n        // cssProcessor: require('cssnano'),\n        cssProcessorPluginOptions: {\n          preset: ['default', { discardComments: { removeAll: true } }],\n        },\n        canPrint: true\n      }),\n      new TerserPlugin()\n    ],\n    noEmitOnErrors: true,\n    splitChunks:{\n      minSize:0,\n      cacheGroups:{\n        common:{\n          name:\"common\",\n          chunks:\"all\",\n          minChunks:2\n        },\n        vendors:{\n          name:\"vendors\",\n          chunks:\"all\",\n          test: /[\\\\/]node_modules[\\\\/]/,\n        }\n      }\n    }\n  },\n  plugins: [\n    new MiniCssExtractPlugin({\n      filename: \"[name]_[contenthash:8].css\"\n    }),\n    new CleanWebpackPlugin(),\n    // new htmlWebpackExternalPlugin({\n    //   externals: [\n    //     {\n    //       module: 'react',\n    //       entry: 'https://now8.gtimg.com/now/lib/16.8.6/react.min.js?_bid=4042',\n    //       global: 'React'\n    //     },\n    //     {\n    //       module: 'react-dom',\n    //       entry: 'https://now8.gtimg.com/now/lib/16.8.6/react-dom.min.js?_bid=4042',\n    //       global: 'ReactDOM'\n    //     }\n    //   ]\n    // })\n  ].concat(htmlWebpackPlguins),\n  module: {\n    rules: [\n      {\n        test: /\\.js$/,\n        use: \"babel-loader\"\n      },\n      {\n        test: /\\.css$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          'css-loader'\n        ]\n      },\n      {\n        test: /\\.less$/,\n        use: [\n          MiniCssExtractPlugin.loader,\n          'css-loader',\n          {\n            loader: 'px2rem-loader',\n            options: {\n              remUnit: 75,\n              remPrecision: 8\n            }\n          },\n          'less-loader',\n          {\n            loader: 'postcss-loader',\n            options: {\n              postcssOptions: {\n                plugins: [\"autoprefixer\"]\n              }\n            }\n          }\n        ]\n      },\n      {\n        test: /\\.(png|jpg|jpeg|gif)$/,\n        use: [\n          {\n            loader: \"file-loader\",\n            options: {\n              filename: \"[name]_[hash:8].[ext]\"\n            }\n          }\n        ]\n      },\n    ]\n  }\n}",lang:"js"})))})));e["default"]=n=>{var e=a.a.useContext(s["context"]),t=e.demos;return a.a.useEffect((()=>{var e;null!==n&&void 0!==n&&null!==(e=n.location)&&void 0!==e&&e.hash&&s["AnchorLink"].scrollToAnchor(decodeURIComponent(n.location.hash.slice(1)))}),[]),a.a.createElement(c,{demos:t})}},JpNl:function(n,e,t){n.exports=t.p+"static/externals2.8639f66f.png"},OSUD:function(n,e,t){n.exports=t.p+"static/externals4.82d2472f.png"},"b4/2":function(n,e,t){n.exports=t.p+"static/externals3.14ec0c55.png"},nnAj:function(n,e,t){n.exports=t.p+"static/externals1.19dce201.png"}}]);