(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[131],{UzXK:function(e,n,l){"use strict";l.r(n);var r=l("q1tI"),o=l.n(r),t=l("dEAq"),s=(l("0H/f"),l("N0lm"),l("DgDr"),l("cGlH"),l("ekZX"),l("Bjia")),a=l("tVxl"),m=(l("1pSt"),o.a.memo((e=>{e.demos;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"markdown"},o.a.createElement("h2",{id:"promise-\u7684\u9759\u6001\u65b9\u6cd5"},o.a.createElement(t["AnchorLink"],{to:"#promise-\u7684\u9759\u6001\u65b9\u6cd5","aria-hidden":"true",tabIndex:-1},o.a.createElement("span",{className:"icon icon-link"})),"Promise \u7684\u9759\u6001\u65b9\u6cd5"),o.a.createElement("hr",null),o.a.createElement("ol",null,o.a.createElement("li",null,"Promise.all(itetator)")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u8fd9\u4e2a\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u65b0\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\uff0c\u8be5 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u5728 ",o.a.createElement("code",null,"iterable")," \u53c2\u6570\u5bf9\u8c61\u91cc\u6240\u6709\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u90fd\u6210\u529f\u7684\u65f6\u5019\u624d\u4f1a\u89e6\u53d1\u6210\u529f\uff0c\u4e00\u65e6\u6709\u4efb\u4f55\u4e00\u4e2a ",o.a.createElement("code",null,"iterable")," \u91cc\u9762\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u5931\u8d25\u5219\u7acb\u5373\u89e6\u53d1\u8be5 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u7684\u5931\u8d25\u3002\u8fd9\u4e2a\u65b0\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u5728\u89e6\u53d1\u6210\u529f\u72b6\u6001\u4ee5\u540e\uff0c\u4f1a\u628a\u4e00\u4e2a\u5305\u542b ",o.a.createElement("code",null,"iterable")," \u91cc\u6240\u6709 ",o.a.createElement("code",null,"promise")," \u8fd4\u56de\u503c\u7684\u6570\u7ec4\u4f5c\u4e3a\u6210\u529f\u56de\u8c03\u7684\u8fd4\u56de\u503c\uff0c\u987a\u5e8f\u8ddf ",o.a.createElement("code",null,"iterable")," \u7684\u987a\u5e8f\u4fdd\u6301\u4e00\u81f4\uff1b\u5982\u679c\u8fd9\u4e2a\u65b0\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u89e6\u53d1\u4e86\u5931\u8d25\u72b6\u6001\uff0c\u5b83\u4f1a\u628a ",o.a.createElement("code",null,"iterable")," \u91cc\u7b2c\u4e00\u4e2a\u89e6\u53d1\u5931\u8d25\u7684 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u7684\u9519\u8bef\u4fe1\u606f\u4f5c\u4e3a\u5b83\u7684\u5931\u8d25\u9519\u8bef\u4fe1\u606f\u3002",o.a.createElement("code",null,"Promise.all")," \u65b9\u6cd5\u5e38\u88ab\u7528\u4e8e\u5904\u7406\u591a\u4e2a ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u7684\u72b6\u6001\u96c6\u5408\u3002 --- ",o.a.createElement("code",null,"MDN")),o.a.createElement("li",null,"\u8fd9\u4e2a\u65b9\u6cd5\u8fd4\u56de\u7684\u65b0 ",o.a.createElement("code",null,"Promise")," \u7684 ",o.a.createElement("code",null,"resolve")," \u56de\u8c03\u6267\u884c\u662f\u5728\u6240\u6709\u8f93\u5165\u7684 ",o.a.createElement("code",null,"promise")," \u7684 ",o.a.createElement("code",null,"resolve")," \u56de\u8c03\u90fd\u7ed3\u675f\uff0c\u6216\u8005\u8f93\u5165\u7684 ",o.a.createElement("code",null,"iterable")," \u91cc\u6ca1\u6709 ",o.a.createElement("code",null,"promise")," \u4e86\u7684\u65f6\u5019\u3002\u5b83\u7684 ",o.a.createElement("code",null,"reject")," \u56de\u8c03\u6267\u884c\u662f\uff0c\u53ea\u8981\u4efb\u4f55\u4e00\u4e2a\u8f93\u5165\u7684 ",o.a.createElement("code",null,"promise")," \u7684 ",o.a.createElement("code",null,"reject")," \u56de\u8c03\u6267\u884c\u6216\u8005\u8f93\u5165\u4e0d\u5408\u6cd5\u7684 ",o.a.createElement("code",null,"promise")," \u5c31\u4f1a\u7acb\u5373\u629b\u51fa\u9519\u8bef\uff0c\u5e76\u4e14 ",o.a.createElement("code",null,"reject")," \u7684\u662f\u7b2c\u4e00\u4e2a\u629b\u51fa\u7684\u9519\u8bef\u4fe1\u606f")),o.a.createElement(s["a"],{code:"// promise.all \u5728\u4efb\u4e00\u4e2a\u4f20\u5165\u7684promise\u5bf9\u8c61\u5931\u8d25\u65f6\u8fd4\u56de\u5931\u8d25\nconst promise1 = 1000;\nconst promise2 = [1, 2, 3, 4];\nconst promise3 = Promise.resolve('promise3 fuilfilled');\nconst promise4 = Promise.reject('promise4 rejected');\n\nconst promise5 = new Promise((resolved, rejected) => {\n  setTimeout(() => {\n    resolved('promise5 fuilfilled');\n  }, 1000);\n});\n\nconst promise6 = new Promise((resolved, rejected) => {\n  setTimeout(() => {\n    rejected('promise6 rejected');\n  }, 500);\n});\n\nconst promise7 = new Promise((resolved, rejected) => {\n  setTimeout(() => {\n    rejected('promise7 rejected');\n  }, 1000);\n});\n\nconst res1 = Promise.all([promise1, promise2, promise3, promise5]);\nconst res2 = Promise.all([promise1, promise2, promise3, promise4]);\nconst res3 = Promise.all([promise1, promise2, promise6, promise7]);",lang:"js"}),o.a.createElement(s["a"],{code:'# res1\n\n+ Promise {<fulfilled>: Array(4)}\n+   __proto__: Promise\n-      [[PromiseState]]: "fulfilled"\n+      [[PromiseResult]]: Array(4)\n-         0: 1000\n-         1: (4) [1, 2, 3, 4]\n-         2: "promise3 fuilfilled"\n-         3: "promise5 fuilfilled"\n-         length: 4\n-         __proto__: Array(0)',lang:"diff"}),o.a.createElement(s["a"],{code:'# res2\n\n+ Promise {<rejected>: "promise3 rejected"}\n+   __proto__: Promise\n-      [[PromiseState]]: "rejected"\n-      [[PromiseResult]]: "promise3 rejected"',lang:"diff"}),o.a.createElement(s["a"],{code:'# res3\n\n+ Promise {<rejected>: "promise5 rejected"}\n+   __proto__: Promise\n-      [[PromiseState]]: "rejected"\n-      [[PromiseResult]]: "promise6 rejected"',lang:"diff"}),o.a.createElement("ul",null,o.a.createElement("li",null,"\u5b83\u7684\u53c2\u6570\u662f\u63a5\u6536\u4e00\u4e2a\u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u8fd4\u56de\u503c\u5177\u6709\u4ee5\u4e0b\u51e0\u79cd\u60c5\u51b5")),o.a.createElement(a["a"],null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u53c2\u6570"),o.a.createElement("th",null,"\u72b6\u6001"),o.a.createElement("th",null,"\u8fd4\u56de\u60c5\u51b5"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u7a7a\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61"),o.a.createElement("td",null,"\u5b8c\u6210"),o.a.createElement("td",null,"\u540c\u6b65\u5730\u8fd4\u56de\u4e00\u4e2a\u5df2\u5b8c\u6210\uff08already resolved\uff09\u72b6\u6001\u7684 Promise")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u53c2\u6570\u503c\u4e0d\u5305\u542b\u4efb\u4f55 Promise \u6216\u6240\u6709\u4f20\u5165\u7684 promise \u90fd\u53d8\u4e3a\u5b8c\u6210\u72b6\u6001"),o.a.createElement("td",null,"\u5b8c\u6210"),o.a.createElement("td",null,"\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u5b8c\u6210\uff08asynchronously resolved\uff09\u72b6\u6001\u7684 Promise")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u5176\u4ed6\u60c5\u51b5"),o.a.createElement("td",null,"\u5b8c\u6210"),o.a.createElement("td",null,"\u8fd4\u56de\u4e00\u4e2a\u5904\u7406\u4e2d\uff08pending\uff09\u7684 Promise\u3002\u8fd9\u4e2a\u8fd4\u56de\u7684 promise \u4e4b\u540e\u4f1a\u5728\u6240\u6709\u7684 promise \u90fd\u5b8c\u6210\u6216\u6709\u4e00\u4e2a promise \u5931\u8d25\u65f6\u5f02\u6b65\u5730\u53d8\u4e3a\u5b8c\u6210\u6216\u5931\u8d25\u3002\u6210\u529f\u65f6\u8fd4\u56de\u503c\u6309\u7167\u53c2\u6570\u5185\u7684\u987a\u5e8f\u6392\u5217\u4e3a\u4e00\u4e2a\u6570\u7ec4")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u4f20\u5165\u7684 promise \u6709\u4e00\u4e2a\u5931\u8d25"),o.a.createElement("td",null,"\u5931\u8d25"),o.a.createElement("td",null,"Promise.all \u5f02\u6b65\u5730\u5c06\u5931\u8d25\u7684\u90a3\u4e2a\u7ed3\u679c\u7ed9\u5931\u8d25\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff0c\u800c\u4e0d\u7ba1\u5176\u5b83 promise \u662f\u5426\u5b8c\u6210")))),o.a.createElement(s["a"],{code:"// \u5bf9Promise.all \u7684\u7ed3\u679c\u4f7f\u7528then\u3001catch\nconsole.log('script start');\n\nsetTimeout(() => {\n  console.log('timer1');\n}, 600);\n\nPromise.all([]).then((res) => {\n  console.log('Promise All empty iterator object ' + res);\n});\n\nPromise.all([1, 2, 3]).then((res) => {\n  console.log('Promise All not exists iterator ' + res);\n});\n\nPromise.all([Promise.resolve('resolve')])\n  .then((res) => {\n    console.log('Promise All ' + res);\n  })\n  .catch((reason) => {\n    console.log('Promise All ' + reason);\n    return reason;\n  });\n\nPromise.all([Promise.reject('rejected')])\n  .then((res) => {\n    console.log('Promise All ' + res);\n  })\n  .catch((reason) => {\n    console.log('Promise All ' + reason);\n    return reason;\n  });\n\nnew Promise((resolve, reject) => {\n  console.log('Promise1');\n  resolve('Promise1 resolve');\n}).then((res) => {\n  console.log('Promise1 then');\n});\n\n// script start\n// Promise1\n// Promise All empty iterator object\n// Promise1 then\n// Promise All not exists iterator 1,2,3\n// Promise All resolve\n// Promise All rejected\n// timer1",lang:"js"}),o.a.createElement(s["a"],{code:"// \u7a7a\u8fed\u4ee3\u5bf9\u8c61\uff0c\u8fd4\u56de\u4e00\u4e2a\u540c\u6b65\u5b8c\u6210\u7684promise\nlet p = Promise.all([]);\n\nconsole.log(p);\n\np.then((res) => {\n  console.log(res);\n});\n\nPromise.resolve('resolved').then((res) => {\n  console.log(res);\n});\n\nfor (let i = 0; i < 3; i++) {\n  console.log('for item ' + i);\n}\n\nsetTimeout(function () {\n  console.log('timer');\n  console.log(p);\n});\n\n// Promise\xa0{<fulfilled>: Array(0)}\n// for item 0\n// for item 1\n// for item 2\n// []\n// resolved\n// timer\n// Promise\xa0{<fulfilled>: Array(0)}",lang:"js"}),o.a.createElement(s["a"],{code:"// \u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u4e0d\u542bpromise\u6216promise\u5df2\u51b3\u8bae\uff0c\u5219\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u5b8c\u6210\u7684promise\n\nlet p = Promise.all([1, 2, 3]);\n\nconsole.log(p);\n\np.then((res) => {\n  console.log(res);\n});\n\nPromise.resolve('resolved').then((res) => {\n  console.log(res);\n});\n\nfor (let i = 0; i < 3; i++) {\n  console.log('for item ' + i);\n}\n\nsetTimeout(function () {\n  console.log('timer');\n  console.log(p);\n});\n\n// Promise\xa0{<pending>}\n// for item 0\n// for item 1\n// for item 2\n// resolved\n// [1, 2, 3]\n// timer\n// Promise\xa0{<fulfilled>: Array(3)}",lang:"js"}),o.a.createElement(s["a"],{code:"// \u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u5305\u542b\u672a\u51b3\u8bae\u7684promise\u65f6\uff0c\u8fd4\u56de\u4e00\u4e2a\u672a\u51b3\u8bae\u7684promise\n\nlet promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('promise2');\n  }, 500);\n});\nlet p = Promise.all([Promise.resolve('promise1'), promise2]);\n\nconsole.log(p);\n\np.then((res) => {\n  console.log(res);\n});\n\nPromise.resolve('resolved').then((res) => {\n  console.log(res);\n});\n\nfor (let i = 0; i < 3; i++) {\n  console.log('for item ' + i);\n}\nsetTimeout(function () {\n  console.log('timer');\n  console.log(p);\n});\n\n// Promise\xa0{<pending>}\n// for item 0\n// for item 1\n// for item 2\n// resolved\n// timer\n// Promise\xa0{<pending>}\n// [\"promise1\", \"promise2\"]",lang:"js"}),o.a.createElement(s["a"],{code:"// \u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u5305\u542b\u672a\u51b3\u8bae\u7684promise\u65f6\uff0c\u8fd4\u56de\u4e00\u4e2a\u672a\u51b3\u8bae\u7684promise\n\nlet promise2 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    resolve('promise2');\n  }, 500);\n});\n\nlet promise3 = new Promise((resolve, reject) => {\n  setTimeout(() => {\n    reject('promise3 reject');\n  }, 1000);\n});\n\nlet p = Promise.all([Promise.resolve('promise1'), promise2, promise3]);\n\nconsole.log(p);\n\np.then((res) => {\n  console.log(res);\n}).catch((reason) => {\n  console.log(reason);\n});\n\nPromise.resolve('resolved').then((res) => {\n  console.log(res);\n});\n\nfor (let i = 0; i < 3; i++) {\n  console.log('for item ' + i);\n}\nsetTimeout(function () {\n  console.log('timer');\n  console.log(p);\n});\n\n// Promise\xa0{<pending>}\n// for item 0\n// for item 1\n// for item 2\n// resolved\n// timer\n// Promise\xa0{<pending>}\n// promise3 reject",lang:"js"}),o.a.createElement("ol",{start:2},o.a.createElement("li",null,"Promise.allSettled(iterator)")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u7b49\u5230\u6240\u6709 ",o.a.createElement("code",null,"promises")," \u90fd\u5df2\u6572\u5b9a(",o.a.createElement("em",null,"settled"),")(\u6bcf\u4e2a ",o.a.createElement("code",null,"promise")," \u90fd\u5df2\u5151\u73b0(",o.a.createElement("em",null,"fulfilled"),")\u6216\u5df2\u62d2\u7edd(",o.a.createElement("em",null,"rejected"),"))\u3002\u8fd4\u56de\u4e00\u4e2a ",o.a.createElement("code",null,"promise"),"\uff0c\u8be5 ",o.a.createElement("code",null,"promise")," \u5728\u6240\u6709 ",o.a.createElement("code",null,"promise")," \u5b8c\u6210\u540e\u5b8c\u6210\u3002\u5e76\u5e26\u6709\u4e00\u4e2a\u6570\u7ec4\uff0c\u6570\u7ec4\u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u5bf9\u5e94\u6bcf\u4e2a ",o.a.createElement("code",null,"promise")," \u7684\u7ed3\u679c (status:'fulfilled/rejected',value:value)"),o.a.createElement("li",null,"\u6211\u4eec\u53ef\u4ee5\u7528\u4e8e\u5f53 ",o.a.createElement("strong",null,"\u591a\u4e2a\u5f7c\u6b64\u4e0d\u4f9d\u8d56\u7684\u5f02\u6b65\u4efb\u52a1")," \u5b8c\u6210\u65f6\uff0c\u6216\u8005\u60f3\u77e5\u9053\u6bcf\u4e2a ",o.a.createElement("code",null,"promise")," \u7684\u7ed3\u679c\u65f6\uff0c\u4f7f\u7528\u5b83")),o.a.createElement(s["a"],{code:'const promise1 = Promise.resolve([1, 2, 3]);\nconst promise2 = new Promise((resolve, rejected) => {\n  setTimeout(() => {\n    rejected(\'error\');\n  }, 1000);\n});\n\nconst promise3 = Promise.allSettled([promise1, promise2]); // {status:fulfilled,result:Array<2>}\n\npromise3.then((res) => res.map((item) => console.log(item)));\n\n// {status: "fulfilled", value: Array(3)}\n// {status: "rejected", reason: "error"}',lang:"js"}),o.a.createElement("ul",null,o.a.createElement("li",null,"\u6b64\u65b9\u6cd5\u7684\u7ed3\u679c\u4e2d\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u7ed3\u679c\u5bf9\u8c61\u6765\u8bf4\uff0c\u90fd\u5b58\u5728\u4e00\u4e2a ",o.a.createElement("code",null,"value/reason")," \u548c ",o.a.createElement("code",null,"fulfilled/rejected"),"\uff0c\u4ee3\u8868\u4e86\u6bcf\u4e2a\u4f20\u5165\u7684\u53c2\u6570\u4e2d\u7684 ",o.a.createElement("code",null,"promise")," \u88ab\u6572\u5b9a\u7684\u72b6\u6001(",o.a.createElement("em",null,"status"),")\u4ee5\u53ca\u5b83\u4eec\u88ab ",o.a.createElement("em",null,"settled")," \u7684 ",o.a.createElement("code",null,"value/reason"))),o.a.createElement("ol",{start:3},o.a.createElement("li",null,"Promise.any")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u6b64\u65b9\u6cd5\u63a5\u6536\u4e00\u4e2a ",o.a.createElement("code",null,"Promise")," \u53ef\u8fed\u4ee3\u5bf9\u8c61\uff0c\u53ea\u8981\u5176\u4e2d\u7684\u4e00\u4e2a ",o.a.createElement("code",null,"promise")," \u6210\u529f\uff0c\u5c31\u8fd4\u56de\u90a3\u4e2a\u5df2\u7ecf\u6210\u529f\u7684 ",o.a.createElement("code",null,"promise"),"\u3002\u5982\u679c\u53ef\u8fed\u4ee3\u5bf9\u8c61\u4e2d\u6ca1\u6709\u4e00\u4e2a ",o.a.createElement("code",null,"promise")," \u6210\u529f(\u5373\u6240\u6709\u7684 ",o.a.createElement("code",null,"promise")," \u90fd\u5931\u8d25/\u62d2\u7edd)\uff0c\u5c31\u8fd4\u56de\u4e00\u4e2a\u5931\u8d25\u7684 ",o.a.createElement("code",null,"promise")," \u548c ",o.a.createElement("code",null,"AggregateError")," \u7c7b\u578b\u7684\u5b9e\u4f8b\uff0c\u5b83\u662f ",o.a.createElement("code",null,"Error")," \u7684\u4e00\u4e2a\u5b50\u7c7b\uff0c\u7528\u4e8e\u628a\u5355\u4e00\u7684\u9519\u8bef\u96c6\u5408\u5728\u4e00\u8d77\u3002\u672c\u8d28\u4e0a\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u548c ",o.a.createElement("code",null,"Promise.all()")," \u662f ",o.a.createElement("strong",null,"\u76f8\u53cd")," \u7684")),o.a.createElement(s["a"],{code:"// \u5bf9Promise.any \u7684\u7ed3\u679c\u4f7f\u7528then\u3001catch\nconsole.log('script start');\n\nsetTimeout(() => {\n  console.log('timer1');\n}, 600);\n\nlet p = Promise.any([]);\n\nconsole.log(p);\n\np.catch((reason) => {\n  console.log('Promise Any empty iterator object ' + reason);\n});\n\nlet p1 = Promise.any([1, 2, 3]);\n\nconsole.log(p1);\n\np1.then((res) => {\n  console.log('Promise Any not exists promise ' + res);\n});\n\nlet p2 = Promise.any([Promise.reject('rejected')]);\n\nconsole.log(p2);\n\np2.catch((reason) => {\n  console.log('p2 Promise Any ', reason);\n  return reason;\n});\n\nlet p3 = new Promise((resolve, reject) => {\n  console.log('promise1');\n  resolve('Promise1 resolve');\n});\n\nconsole.log(p3);\n\np3.then((res) => {\n  console.log('Promise1 then');\n});\n\n// script start\n// Promise\xa0{<rejected>: AggregateError: All promises were rejected}\n// Promise\xa0{<pending>}\n// Promise\xa0{<pending>}\n// promise1\n// Promise\xa0{<fulfilled>: \"Promise1 resolve\"}\n\n// Promise Any empty iterator object AggregateError: All promises were rejected\n\n// Promise1 then\n// Promise Any not exists promise 1\n\n// p2 Promise Any  AggregateError: All promises were rejected\n\n// timer1",lang:"js"}),o.a.createElement(a["a"],null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",null,"\u53c2\u6570"),o.a.createElement("th",null,"\u72b6\u6001"),o.a.createElement("th",null,"\u8fd4\u56de\u60c5\u51b5"))),o.a.createElement("tbody",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u7a7a\u7684\u53ef\u8fed\u4ee3\u5bf9\u8c61"),o.a.createElement("td",null,"\u5931\u8d25"),o.a.createElement("td",null,"\u540c\u6b65\u5730\u8fd4\u56de\u4e00\u4e2a\u5df2\u5931\u8d25\uff08already rejected\uff09\u72b6\u6001\u7684 Promise")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u53c2\u6570\u503c\u4e0d\u5305\u542b\u4efb\u4f55 Promise \u6216\u4efb\u4e00\u4e2a\u4f20\u5165\u7684 promise \u53d8\u4e3a\u5b8c\u6210\u72b6\u6001"),o.a.createElement("td",null,"\u5b8c\u6210"),o.a.createElement("td",null,"\u8fd4\u56de\u4e00\u4e2a\u5f02\u6b65\u5b8c\u6210\uff08asynchronously resolved\uff09\u72b6\u6001\u7684 Promise")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u5176\u4ed6\u60c5\u51b5"),o.a.createElement("td",null,"\u5b8c\u6210"),o.a.createElement("td",null,"\u8fd4\u56de\u4e00\u4e2a\u5904\u7406\u4e2d\uff08pending\uff09\u7684 Promise\u3002\u8fd9\u4e2a\u8fd4\u56de\u7684 promise \u4e4b\u540e\u4f1a\u5728\u6240\u6709\u7684 promise \u90fd\u5931\u8d25\u6216\u6709\u4e00\u4e2a promise \u6210\u529f\u65f6\u5f02\u6b65\u5730\u53d8\u4e3a\u5b8c\u6210\u6216\u5931\u8d25\u3002\u6210\u529f\u65f6\u8fd4\u56de\u7b2c\u4e00\u4e2a\u6210\u529f\u7684 promise\uff0c\u5931\u8d25\u65f6\uff0c\u8fd4\u56de\u5f02\u6b65\u5931\u8d25\u548c\u4e00\u4e2a AggregateError \u5bf9\u8c61\uff0c\u5b83\u7ee7\u627f\u81ea Error\uff0c\u6709\u4e00\u4e2a error \u5c5e\u6027\uff0c\u5c5e\u6027\u503c\u662f\u7531\u6240\u6709\u5931\u8d25\u503c\u586b\u5145\u7684\u6570\u7ec4")),o.a.createElement("tr",null,o.a.createElement("td",null,"\u4f20\u5165\u7684 promise \u6709\u4e00\u4e2a\u6210\u529f"),o.a.createElement("td",null,"\u6210\u529f"),o.a.createElement("td",null,"Promise.any \u5f02\u6b65\u5730\u5c06\u6210\u529f\u7684\u90a3\u4e2a\u7ed3\u679c\u7ed9\u6210\u529f\u72b6\u6001\u7684\u56de\u8c03\u51fd\u6570\uff0c\u800c\u4f1a\u5ffd\u7565\u6389\u6240\u6709\u88ab\u62d2\u7edd\u7684 promise")))),o.a.createElement("ol",{start:4},o.a.createElement("li",null,"Promise.race(iterable)")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u5f53 ",o.a.createElement("code",null,"iterable")," \u53c2\u6570\u91cc\u7684\u4efb\u610f\u4e00\u4e2a promise \u6210\u529f\u6216\u5931\u8d25\u540e\uff0c",o.a.createElement("code",null,"\u7236promise")," \u9a6c\u4e0a\u4e5f\u4f1a\u7528 ",o.a.createElement("code",null,"\u5b50promise")," \u7684\u6210\u529f\u8fd4\u56de\u503c\u6216\u5931\u8d25\u8be6\u60c5\u4f5c\u4e3a\u53c2\u6570\u8c03\u7528 ",o.a.createElement("code",null,"\u7236promise")," \u7ed1\u5b9a\u7684\u76f8\u5e94\u60c5\u51b5\uff0c\u5e76\u8fd4\u56de\u8be5 ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61")),o.a.createElement(s["a"],{code:"const promise1 = new Promise((resolved, rejected) => {\n  setTimeout(resolved, 1000, 'resolved');\n});\n\nconst promise2 = new Promise((resolved, rejected) => {\n  setTimeout(rejected, 1500, 'rejected1');\n});\n\nconst promise3 = new Promise((resolved, rejected) => {\n  setTimeout(rejected, 500, 'rejected2');\n});\n\nPromise.race([promise1, promise2])\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });\n// 'resolved'\n\nPromise.race([promise1, promise3])\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });\n// 'rejected2'",lang:"js"}),o.a.createElement("ul",null,o.a.createElement("li",null,"\u53ea\u8981\u7ed9\u5b9a\u7684\u53ef\u8fed\u4ee3\u53c2\u6570\u4e2d\u7684\u4efb\u4e00\u4e2a ",o.a.createElement("code",null,"promise")," \u88ab\u6572\u5b9a\uff0c\u5c31\u4f1a\u91c7\u7528\uff0c\u4ece\u800c\u5f02\u6b65\u5730\u89e3\u6790\u6216\u62d2\u7edd\uff08\u4e00\u65e6\u5806\u6808\u4e3a\u7a7a)"),o.a.createElement("li",null,"\u5982\u679c\u4f20\u5165\u7684\u53c2\u6570\u662f\u4e00\u4e2a\u7a7a\u7684\u8fed\u4ee3\uff0c\u90a3\u4e48\u8fd4\u56de\u7684 ",o.a.createElement("code",null,"promise")," \u5c06 ",o.a.createElement("strong",null,"\u6c38\u8fdc\u5904\u4e8e\u7b49\u5f85\u72b6\u6001"),"\uff1b\u5982\u679c\u8fed\u4ee3\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2a\u975e\u627f\u8bfa\u503c/\u5df2\u89e3\u51b3/\u62d2\u7edd\u7684\u627f\u8bfa\uff0c\u5219 ",o.a.createElement("code",null,"Promise.race")," \u5c06\u89e3\u6790\u4e3a\u8fed\u4ee3\u4e2d\u627e\u5230\u7684\u7b2c\u4e00\u4e2a\u503c")),o.a.createElement(s["a"],{code:'const p1 = Promise.race([]);\n\nconst p2 = Promise.race([[1, 2, 3], Promise.resolve(3)]);\n\nconst p3 = Promise.race([Promise.resolve(3), 5, 6]);\n\np1;\n// Promise\xa0{<pending>}\n// __proto__: Promise\n// [[PromiseState]]: "pending"\n// [[PromiseResult]]: undefined\n\np2;\n// Promise {<fulfilled>: Array(3)}\n// __proto__: Promise\n// [[PromiseState]]: "fulfilled"\n// [[PromiseResult]]: Array(3)\n\np3;\n// Promise {<fulfilled>: 3}\n// __proto__: Promise\n// [[PromiseState]]: "fulfilled"\n// [[PromiseResult]]: 3',lang:"js"}),o.a.createElement("ol",{start:5},o.a.createElement("li",null,"Promise.reject")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u8fd4\u56de\u4e00\u4e2a\u5e26\u6709\u62d2\u7edd\u539f\u56e0\u7684 ",o.a.createElement("code",null,"Promise")," \u5bf9\u8c61\u3002\u53ef\u4ee5\u81ea\u5b9a\u4e49\u88ab ",o.a.createElement("code",null,"reject")," \u7684\u539f\u56e0\uff0c\u6216\u8005\u901a\u8fc7 ",o.a.createElement("code",null,"Error")," \u5bf9\u8c61\u6765\u8bbe\u7f6e")),o.a.createElement(s["a"],{code:"Promise.reject(new Error('error msg'))\n  .then((res) => {\n    console.log(res);\n  })\n  .then(null, (reason) => {\n    console.log(reason);\n  });\n\n// Error: error msg",lang:"js"}),o.a.createElement("ol",{start:6},o.a.createElement("li",null,"Promise.resolve")),o.a.createElement("ul",null,o.a.createElement("li",null,"\u6b64\u65b9\u6cd5\u8fd4\u56de\u4e00\u4e2a\u4ee5\u7ed9\u5b9a\u503c\u89e3\u6790\u8fc7\u7684 ",o.a.createElement("code",null,"Promise")," \u5bf9\u8c61\u3002\u5982\u679c\u8fd9\u4e2a\u503c\u662f\u4e00\u4e2a ",o.a.createElement("code",null,"promise")," \uff0c\u90a3\u4e48\u5c06\u8fd4\u56de\u8fd9\u4e2a ",o.a.createElement("code",null,"promise"),' \uff1b\u5982\u679c\u8fd9\u4e2a\u503c\u662f thenable\uff08\u5373\u5e26\u6709"then" \u65b9\u6cd5\uff09\uff0c\u8fd4\u56de\u7684 ',o.a.createElement("code",null,"promise")," \u4f1a\u201c\u8ddf\u968f\u201d\u8fd9\u4e2a thenable \u7684\u5bf9\u8c61\uff0c\u91c7\u7528\u5b83\u7684\u6700\u7ec8\u72b6\u6001\uff1b\u5426\u5219\u8fd4\u56de\u7684 ",o.a.createElement("code",null,"promise")," \u5c06\u4ee5\u6b64\u503c\u5b8c\u6210\u3002\u6b64\u51fd\u6570\u5c06\u7c7b ",o.a.createElement("code",null,"promise")," \u5bf9\u8c61\u7684\u591a\u5c42\u5d4c\u5957\u5c55\u5e73")),o.a.createElement(s["a"],{code:"Promise.resolve('suceess')\n  .then((res) => {\n    console.log(res);\n  })\n  .then((reason) => {\n    console.log(reason);\n  });\n// suceess",lang:"js"}),o.a.createElement(s["a"],{code:"Promise.resolve([1, null, undefined])\n  .then((res) => {\n    console.log(res);\n  })\n  .then((reason) => {\n    console.log(reason);\n  });\n//\xa0[1, null, undefined]",lang:"js"}),o.a.createElement(s["a"],{code:"let promise1 = new Promise((rel, rej) => {\n  rel('primise1');\n});\n\nlet promise2 = Promise.resolve(promise1);\n\npromise2.then((res) => console.log(res)); // promise1\n\npromise1 === promise2; // true\n// promise.resolve\u76f4\u63a5\u8fd4\u56de\u4e86\u8fd9\u4e2apromise",lang:"js"}),o.a.createElement("ul",null,o.a.createElement("li",null,"\u4f7f\u7528 ",o.a.createElement("code",null,"resolve")," \u4e00\u4e2a ",o.a.createElement("code",null,"thenable")," \u5bf9\u8c61\u3002\u5f53\u8fd4\u56de\u7684\u5bf9\u8c61\u5177\u6709 ",o.a.createElement("code",null,"then")," \u7684\u53ef\u8c03\u7528\u65b9\u6cd5\u65f6\uff0c",o.a.createElement("code",null,"js")," \u5c06\u4f1a\u8c03\u7528\u8be5\u65b9\u6cd5\u5e76\u63d0\u4f9b\u4e24\u4e2a\u5904\u7406\u51fd\u6570\u4f5c\u4e3a\u53c2\u6570\uff0c\u76f4\u5230\u5176\u4e2d\u4e00\u4e2a\u88ab\u8c03\u7528\uff08\u72b6\u6001\u88ab\u6539\u53d8\uff09")),o.a.createElement(s["a"],{code:"let promise1 = Promise.resolve({\n  then: function (onFulfill, onReject) {\n    onFulfill('fulfilled');\n  },\n});\n// \u8fd4\u56de\u4e00\u4e2apromise\nconsole.log(promise1);\npromise1 instanceof Promise; // true\n\npromise1.then((res) => {\n  console.log(res);\n});\n// fulfilled",lang:"js"}),o.a.createElement(s["a"],{code:"let thenable1 = {\n  then: function (onFulfill, onReject) {\n    throw new Error('error first');\n    onFulfill('fulfilled thenable1');\n  },\n};\n\nlet thenable2 = {\n  then: function (resolve, reject) {\n    resolve('fulfilled thenable2');\n    throw new Error('error last');\n  },\n};\n\nlet p1 = Promise.resolve(thenable1)\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });\n\nlet p2 = Promise.resolve(thenable2)\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });\n\n// fulfilled thenable2\n// Error: error first",lang:"js"}),o.a.createElement(s["a"],{code:"let p1 = new Promise((rel, rej) => {\n  rel('p1');\n  throw new Error('p1 eroor');\n})\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });\n\nlet p2 = new Promise((rel, rej) => {\n  throw new Error('p2 eroor');\n  rel('p2');\n})\n  .then((res) => {\n    console.log(res);\n  })\n  .catch((reason) => {\n    console.log(reason);\n  });",lang:"js"})))})));n["default"]=e=>{var n=o.a.useContext(t["context"]),l=n.demos;return o.a.useEffect((()=>{var n;null!==e&&void 0!==e&&null!==(n=e.location)&&void 0!==n&&n.hash&&t["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),o.a.createElement(m,{demos:l})}}}]);