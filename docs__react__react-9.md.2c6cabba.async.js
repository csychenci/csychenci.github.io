(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[158],{"3OMX":function(e,t,a){"use strict";a.r(t);var n=a("q1tI"),l=a.n(n),r=a("dEAq"),c=(a("0H/f"),a("N0lm"),a("DgDr"),a("cGlH"),a("ekZX"),a("Bjia")),o=(a("tVxl"),a("1pSt"),l.a.memo((e=>{e.demos;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"markdown"},l.a.createElement("h2",{id:"\u4e3a\u4ec0\u4e48\u9700\u8981\u72b6\u6001\u7ba1\u7406"},l.a.createElement(r["AnchorLink"],{to:"#\u4e3a\u4ec0\u4e48\u9700\u8981\u72b6\u6001\u7ba1\u7406","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u4e3a\u4ec0\u4e48\u9700\u8981\u72b6\u6001\u7ba1\u7406"),l.a.createElement("hr",null),l.a.createElement("ol",null,l.a.createElement("li",null,"\u5355\u5411\u6570\u636e\u6d41")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5728\u521d\u5b66 react \u4e4b\u65f6\uff0c\u5e76\u6ca1\u6709\u4f7f\u7528\u989d\u5916\u7684\u5de5\u5177\u6765\u505a\u72b6\u6001\u7ba1\u7406\uff0c\u800c\u662f\u4f7f\u7528 react \u7684\u5355\u5411\u6570\u636e\u6d41 props \u4e0e \u7ec4\u4ef6\u5185\u90e8\u7684 state \u7684\u66f4\u65b0\u6765\u505a UI \u4ee5\u53ca\u7ec4\u4ef6\u72b6\u6001\u7684\u53d8\u5316\u7ba1\u7406\u3002\u53ea\u8981 props \u6216\u662f state \u53d8\u5316\uff0creact \u5c31\u4f1a\u91cd\u65b0 render \u76f8\u5e94\u5730\u7ec4\u4ef6"),l.a.createElement("li",null,"\u5355\u9879\u7684\u6570\u636e\u6d41\u52a8\u7528\u4e8e\u5904\u7406\u4e00\u4e9b\u590d\u6742\u5ea6\u4e0d\u9ad8\u7684\u9879\u76ee\u662f\u591f\u7528\u7684\uff0c\u4f46\u968f\u7740\u9879\u76ee\u89c4\u6a21\u7684\u589e\u5927\uff0creact \u53ea\u63d0\u4f9b\u4e86\u5728\u5185\u90e8\u7ec4\u4ef6\u4fee\u6539\u72b6\u6001\u7684\u63a5\u53e3 setState\uff0c\u5bfc\u81f4\u6570\u636e\u3001\u4e1a\u52a1\u903b\u8f91\u548c\u89c6\u56fe\u5c42\u8026\u5408\u5728\u7ec4\u4ef6\u5185\u90e8\u3002\u56e0\u6b64\uff0c\u4f7f\u7528 props + state \u7684\u65b9\u5f0f\u663e\u7136\u5df2\u7ecf\u4e0d\u5229\u4e8e\u6211\u4eec\u7ef4\u62a4\u548c\u6269\u5c55\u7ec4\u4ef6\u7684\u72b6\u6001")),l.a.createElement("ol",{start:2},l.a.createElement("li",null,"\u9879\u76ee\u89c4\u6a21\u589e\u5927\u5bfc\u81f4\u7684\u95ee\u9898")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("strong",null,l.a.createElement("em",null,"\u7ec4\u4ef6\u4e4b\u95f4\u901a\u4fe1\u7684\u6210\u672c\u63d0\u9ad8")),"\u3002react \u91c7\u7528\u4e86\u5355\u5411\u6570\u636e\u6d41\uff0c\u4f46\u5f80\u5f80\u5b9e\u9645\u4e2d\u7684\u7ec4\u4ef6\u7684\u901a\u4fe1\u4e0d\u662f\u5355\u5411\u7684\u3002\u5b50\u7ec4\u4ef6\u60f3\u8981\u6539\u53d8\u7236\u7ec4\u4ef6\u7684\u72b6\u6001\u7684\u8bdd\uff0c\u60f3\u5b9e\u73b0\u8fd9\u4e2a\u9006\u5411\u7684\u8fc7\u7a0b\uff0c\u9700\u8981\u7236\u7ec4\u4ef6\u901a\u8fc7\u4f20\u9012 callback \u4f5c\u4e3a props \u8fd9\u79cd\u65b9\u5f0f\u6765\u8fdb\u884c\u3002\u4f46\u662f\uff0c\u7ec4\u4ef6\u5185\u7684\u5d4c\u5957\u662f\u4e0d\u53ef\u907f\u514d\u7684\uff0c\u6b64\u65f6\uff0c\u5c31\u9700\u8981\u5c06 callback \u4f5c\u4e3a props \u4e00\u7ea7\u4e00\u7ea7\u5730\u4f20\u9012\u4e0b\u53bb\uff0c\u663e\u800c\u6613\u89c1\uff0c\u8fd9\u6837\u505a\u7684\u6210\u672c\u662f\u975e\u5e38\u9ad8\u7684"),l.a.createElement("li",null,l.a.createElement("strong",null,l.a.createElement("em",null,"\u6570\u636e\u6d41\u53d8\u5f97\u6a21\u7cca")),"\u3002\u5728\u7ec4\u4ef6\u95f4\u901a\u4fe1\u7684\u65b9\u5f0f\uff0c\u901a\u8fc7\u4f20\u9012 props \u7531\u5c06\u7236\u7ec4\u4ef6\u7684 state \u4f20\u9012\u4e0b\u53bb\uff0c\u4f20\u9012 callback(props) \u4f7f\u5f97\u5b50\u7ec4\u4ef6\u80fd\u591f\u6539\u53d8\u7236\u7ec4\u4ef6\u7684 state\u3002\u6b64\u65f6\uff0creact \u5355\u5411\u6570\u636e\u6d41\u5728\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u5c31\u88ab\u7834\u574f\u4e86\uff0c\u6570\u636e\u6d41\u4e5f\u56e0\u6b64\u53d8\u5f97\u6a21\u7cca\u590d\u6742"),l.a.createElement("li",null,l.a.createElement("strong",null,l.a.createElement("em",null,"\u7ec4\u4ef6\u53d8\u5f97\u81c3\u80bf")),"\u3002\u5f53\u591a\u4e2a\u7ec4\u4ef6\u5171\u4eab\u4e00\u4e2a state \u65f6\uff0c\u6211\u4eec\u4f1a\u91c7\u53d6\u72b6\u6001\u63d0\u5347\u7684\u65b9\u5f0f\u5c06 state \u63d0\u5347\u5230\u5171\u540c\u7684\u7236\u7ec4\u4ef6\u4e2d\u3002\u4f46\u662f\uff0c\u6b64\u65f6\u7ec4\u4ef6\u7684\u4e00\u4e9b\u7279\u5b9a\u72b6\u6001\u53d8\u5f97\u5f88\u4e0d\u6613\u4e8e\u89c2\u6d4b\uff0c\u53ea\u662f\u4e3a\u4e86\u7ec4\u4ef6\u901a\u4fe1\u800c\u52a0\u4e0a\u53bb\uff0c\u5bfc\u81f4\u67d0\u4e9b\u7ec4\u4ef6\u53d8\u5f97\u5341\u5206\u81c3\u80bf")),l.a.createElement("ol",{start:3},l.a.createElement("li",null,"\u72b6\u6001\u7ba1\u7406\u7684\u89e3\u51b3\u65b9\u6848")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u901a\u8fc7\u5c06\u6240\u6709 state \u63d0\u5347\u5230 global store\uff0c\u4e5f\u5c31\u662f \u5168\u5c40state\uff0c\u7136\u540e\u4f7f\u7528\u67d0\u79cd\u7279\u5b9a\u65b9\u5f0f\u6765\u83b7\u53d6\u3001\u66f4\u65b0\u3001\u4fee\u6539 state\uff0c\u4f7f\u6574\u4e2a\u6570\u636e\u7684\u6d41\u5411\u53d8\u5f97\u66f4\u6613\u4e8e\u7ba1\u7406\uff0c\u5982 context \u7684 provider"),l.a.createElement("li",null,"\u72b6\u6001\u7ba1\u7406\uff0c\u5b9e\u9645\u4e0a\u662f\u964d\u4f4e\u4e86\u7ec4\u4ef6\u95f4\u7684\u8026\u5408\u5ea6\uff0c\u800c\u5236\u7ea6\u5927\u578b\u5e94\u7528\u53ef\u7ef4\u62a4\u6027\u7684\u56e0\u7d20\u6070\u597d\u662f\u8026\u5408\u5ea6"),l.a.createElement("li",null,l.a.createElement("code",null,"props")," + ",l.a.createElement("code",null,"state")," \u7684\u5c42\u7ea7\u4f53\u7cfb\u4e0e\u72b6\u6001\u7ba1\u7406\u7684\u5c42\u7ea7\u4f53\u7cfb\u5bf9\u6bd4")),l.a.createElement("p",null,l.a.createElement("img",{src:a("jqpY"),alt:"props+state"})),l.a.createElement("p",null,l.a.createElement("img",{src:a("nuOS"),alt:"\u5168\u5c40shore"})),l.a.createElement("ul",null,l.a.createElement("li",null,"\u6b64\u65f6\uff0c\u72b6\u6001\u7ba1\u7406\u7684\u76ee\u7684\u5c31\u53d8\u5f97\u5341\u5206\u660e\u4e86\u4e86\uff0c\u6211\u4eec\u7684\u72b6\u6001\u4e5f\u53d8\u5f97\u53ef\u89c2\u6d4b\u7684\u3001\u66f4\u597d\u8ffd\u6eaf\u5176\u6765\u6e90\u7684\u72b6\u6001")),l.a.createElement("hr",null),l.a.createElement("h2",{id:"mobx"},l.a.createElement(r["AnchorLink"],{to:"#mobx","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"MOBX"),l.a.createElement("hr",null),l.a.createElement("ol",null,l.a.createElement("li",null,"Mobx \u7b80\u4ecb")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"Mobx")," \u7684\u6838\u5fc3\u6982\u5ff5\u6709\u56db\u4e2a\uff1aobservable state\u3001actions\u3001computed\u3001reactions"),l.a.createElement("li",null,"observale state\uff1a\u901a\u8fc7 `bservable(state) \u5b9a\u4e49\u7ec4\u4ef6\u7684\u72b6\u6001(component state)\uff0c\u5305\u88c5\u540e\u7684\u72b6\u6001\u662f\u4e00\u4e2a\u53ef\u8ffd\u8e2a\u5b57\u6bb5 (Observable Data)"),l.a.createElement("li",null,"action\uff1a\u901a\u8fc7 ",l.a.createElement("code",null,"action")," \u6765\u4fee\u6539\u72b6\u6001 state\uff0c\u4e00\u822c\u662f\u5c06\u4e00\u4e2a\u65b9\u6cd5\u6807\u8bb0\u4e3a\u53ef\u4ee5\u4fee\u6539 state \u7684 action"),l.a.createElement("li",null,"computed\uff1a\u6807\u8bb0\u4e00\u4e2a\u53ef\u4ee5\u7531 state \u6d3e\u751f\u51fa\u65b0\u7684\u503c\u5e76\u4e14\u7f13\u5b58\u5176\u8f93\u51fa\u7684 getter")),l.a.createElement("p",null,l.a.createElement("img",{src:a("aYeG"),alt:"\u6838\u5fc3\u6982\u5ff5\u56fe"})),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5229\u7528 ",l.a.createElement("code",null,"Mobx"),"\uff0c\u7ec4\u4ef6\u72b6\u6001\u53ef\u4ee5\u5728\u5916\u90e8\u5b9a\u4e49\uff0c\u4e5f\u53ef\u5728\u7ec4\u4ef6\u5185\u90e8\u5b9a\u4e49\uff0c\u56e0\u6b64\uff0c\u6570\u636e\u3001\u4e1a\u52a1\u903b\u8f91\u53ef\u4ee5\u8f7b\u6613\u5730\u548c\u89c6\u56fe\u5c42\u5206\u79bb\uff0c\u63d0\u9ad8\u5e94\u7528\u7684\u53ef\u6269\u5c55\u6027\u548c\u53ef\u7ef4\u62a4\u6027"),l.a.createElement("li",null,"\u53e6\u5916\uff0c\u7531\u4e8e\u7ec4\u4ef6\u72b6\u6001\u53ef\u4ee5\u5916\u90e8\u5b9a\u4e49\uff0c\u5144\u5f1f\u8282\u70b9\u4e4b\u95f4\u7684\u72b6\u6001\u540c\u6b65\u4e5f\u53d8\u5f97\u5f88\u5bb9\u6613")),l.a.createElement("ol",{start:2},l.a.createElement("li",null,"observable")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"observable")," \u63a5\u53e3\u7528\u4e8e\u5b9a\u4e49\u53ef\u89c2\u5bdf\u6570\u636e\uff0c\u4e5f\u5c31\u662f\u7ec4\u4ef6\u7684\u72b6\u6001\u3002\u53ef\u4ee5\u89c2\u5bdf\u5230\u6570\u636e\u7684\u8bfb\u53d6\u3001\u5199\u5165\uff0c\u5e76\u8fdb\u884c\u62e6\u622a")),l.a.createElement("ol",{start:3},l.a.createElement("li",null,"observer")),l.a.createElement("ul",null,l.a.createElement("li",null,l.a.createElement("code",null,"observer")," \u63a5\u53d7\u4e00\u4e2a ",l.a.createElement("code",null,"React\u7ec4\u4ef6")," \u4f5c\u4e3a\u53c2\u6570\uff0c\u5e76\u5c06\u5176\u8f6c\u53d8\u4e3a\u54cd\u5e94\u5f0f\u7ec4\u4ef6\u3002\u54cd\u5e94\u5f0f\u7ec4\u4ef6\uff0c\u5373\u5f53\u4e14\u4ec5\u5f53\u7ec4\u4ef6\u4f9d\u8d56\u7684\u53ef\u89c2\u5bdf\u6570\u636e\u53d1\u751f\u6539\u53d8\u65f6\uff0c\u7ec4\u4ef6\u624d\u4f1a\u81ea\u52a8\u54cd\u5e94\uff0c\u5e76\u91cd\u65b0\u6e32\u67d3")),l.a.createElement("ol",{start:4},l.a.createElement("li",null,"action")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5728 ",l.a.createElement("code",null,"Mobx")," \u4e2d\u662f\u53ef\u4ee5\u76f4\u63a5\u4fee\u6539\u53ef\u89c2\u5bdf\u6570\u636e\uff0c\u6765\u8fdb\u884c\u66f4\u65b0\u7ec4\u4ef6\u7684\uff0c\u4f46\u4e0d\u5efa\u8bae\u8fd9\u6837\u505a\uff0c\u56e0\u4e3a\u4f1a\u4f7f\u9875\u9762\u72b6\u6001\u53d8\u5f97\u96be\u4ee5\u7ef4\u62a4\uff0c\u6240\u6709\u5bf9\u53ef\u89c2\u5bdf\u6570\u636e\u7684\u4fee\u6539\uff0c\u90fd\u5e94\u8be5\u5728 ",l.a.createElement("code",null,"action")," \u4e2d\u8fdb\u884c")),l.a.createElement("hr",null),l.a.createElement("h3",{id:"\u5b9e\u4f8b"},l.a.createElement(r["AnchorLink"],{to:"#\u5b9e\u4f8b","aria-hidden":"true",tabIndex:-1},l.a.createElement("span",{className:"icon icon-link"})),"\u5b9e\u4f8b"),l.a.createElement("hr",null),l.a.createElement("ol",null,l.a.createElement("li",null,"\u5b89\u88c5\u4f9d\u8d56")),l.a.createElement("ul",null,l.a.createElement("li",null,"\u5b89\u88c5 ",l.a.createElement("code",null,"mobx")," \u4e0e ",l.a.createElement("code",null,"mobx-react"))),l.a.createElement(c["a"],{code:"npm install mobx mbox-react -S",lang:"bash"}),l.a.createElement("ul",null,l.a.createElement("li",null,"\u914d\u7f6e ",l.a.createElement("code",null,"babel")," \u88c5\u9970\u5668")),l.a.createElement(c["a"],{code:"cnpm install babel-plugin-transform-decorators-legacy -D\ncnpm install  @babel/preset-env -D\ncnpm install babel-plugin-transform-class-properties -D\ncnpm install  @babel/plugin-proposal-decorators -D",lang:"bash"}),l.a.createElement("ul",null,l.a.createElement("li",null,"\u914d\u7f6e ",l.a.createElement("code",null,"package.json"))),l.a.createElement(c["a"],{code:'"babel": {\n    "plugins": [\n      [\n        "@babel/plugin-proposal-decorators",\n        {\n          "legacy": true\n        }\n      ],\n      "transform-class-properties"\n    ],\n    "presets": [\n      "react-app",\n      "@babel/preset-env"\n    ]\n    },',lang:"json"}),l.a.createElement("ol",{start:2},l.a.createElement("li",null,"\u5728\u6839\u7ec4\u4ef6\u4e2d\u4f7f\u7528 Provider \u5305\u88f9")),l.a.createElement(c["a"],{code:"// App.js\nimport React from 'react';\nimport { Provider } from 'mobx-react';\nimport store from './store/index/';\nfunction App() {\n  return (\n    <Provider store={store}>\n      <div className=\"App\"></div>\n    </Provider>\n  );\n}",lang:"js"}),l.a.createElement("ol",{start:3},l.a.createElement("li",null,"\u521b\u5efa mobx-store \u6570\u636e\u5e93")),l.a.createElement("ul",null,l.a.createElement("li",null,"mobx5 \u8bed\u6cd5\uff0cmobx \u76ee\u524d\u7248\u672c\u4e3a ",l.a.createElement("code",null,"mobx6"),"\uff0c\u4f7f\u7528 ",l.a.createElement("code",null,"mobx6")," \u53bb\u8fd0\u884c ",l.a.createElement("code",null,"mobx5")," \u7684\u4ee3\u7801\u53ef\u80fd\u4f1a\u51fa\u73b0\u6570\u636e\u66f4\u65b0\u7ec4\u4ef6\u4e0d\u6e32\u67d3\u7684\u60c5\u51b5\uff0c\u8bf7\u4f7f\u7528 ",l.a.createElement("code",null,"mobx6")," \u7684\u8bed\u6cd5\u4e66\u5199")),l.a.createElement(c["a"],{code:"import { observable, action, computed, makeObservable } from 'mobx';\nclass TestData {\n  @observable list = [\n    { id: 1, text: 'sleep' },\n    { id: 2, text: 'running' },\n  ];\n  @observable count = 0;\n  @action addList(payload) {\n    this.list.push({\n      id: Date.now(),\n      text: payload,\n    });\n  }\n  @action changeCount(payload) {\n    this.count++;\n  }\n}\nexport default TestData;",lang:"js"}),l.a.createElement("ol",{start:4},l.a.createElement("li",null,"\u5b9e\u4f8b\u5316\u5168\u5c40 store")),l.a.createElement(c["a"],{code:"// store.js\nimport TestData from './modules/TestData';\nclass Store {\n  constructor() {\n    this.testData = new TestData();\n  }\n}\n\nexport default new Store();",lang:"js"}),l.a.createElement("ol",{start:5},l.a.createElement("li",null,"\u5728\u7ec4\u4ef6\u4e2d\u4f7f\u7528")),l.a.createElement(c["a"],{code:"// TestMake\nimport React, { useState } from 'react';\nimport { observer, inject } from 'mobx-react';\nimport { observe } from 'mobx';\n\n@inject('store') // \u6570\u636e\u6ce8\u5165\n@observer // \u8f6c\u5316\u4e3a\u54cd\u5e94\u5f0f\u7ec4\u4ef6\nclass TestMake extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      text: '',\n      count: 'jetmine',\n    };\n  }\n  textChange() {\n    let { testData } = this.props.store;\n    testData.addList(this.state.text);\n  }\n  setText(e) {\n    this.setState({ text: e.target.value });\n  }\n  submitList(e) {\n    if (e.target.value == '') {\n      return;\n    }\n    if (e.keyCode === 13) {\n      let { testData } = this.props.store;\n      console.log(testData.list, this.state);\n      testData.addList(this.state.text);\n      this.setState({ text: '' });\n    }\n  }\n  clickAdd() {\n    let { testData } = this.props.store;\n    testData.changeLarge(this.state.count);\n    console.log(testData);\n  }\n  render() {\n    console.log('this.props.store', this.props.store);\n    let { testData } = this.props.store;\n    return (\n      <div>\n        <input\n          type=\"text\"\n          onChange={this.setText.bind(this)}\n          onKeyUp={this.submitList.bind(this)}\n        />\n        <button onClick={this.textChange.bind(this)}>\u8bf7\u6c42</button>\n        <hr />\n        <div>\n          {testData.list.map((ele, idx) => {\n            return <div key={ele.id}>{ele.text}</div>;\n          })}\n        </div>\n        <hr />\n        <span>{testData.count}</span>\n        <span onClick={this.clickAdd.bind(this)}>\u70b9\u51fb</span>\n      </div>\n    );\n  }\n}\n\nexport default TestMake;",lang:"js"})))})));t["default"]=e=>{var t=l.a.useContext(r["context"]),a=t.demos;return l.a.useEffect((()=>{var t;null!==e&&void 0!==e&&null!==(t=e.location)&&void 0!==t&&t.hash&&r["AnchorLink"].scrollToAnchor(decodeURIComponent(e.location.hash.slice(1)))}),[]),l.a.createElement(o,{demos:a})}},aYeG:function(e,t,a){e.exports=a.p+"static/AtomWatch.357cf363.jpg"},jqpY:function(e,t,a){e.exports=a.p+"static/PropsState.ddea280d.jpg"},nuOS:function(e,t,a){e.exports=a.p+"static/Stateshare.dc8a4da3.jpg"}}]);