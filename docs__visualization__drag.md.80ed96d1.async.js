(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[217],{"90q2":function(t,e,n){"use strict";n.r(e);var l=n("q1tI"),a=n.n(l),o=n("dEAq"),i=(n("0H/f"),n("N0lm"),n("DgDr"),n("cGlH"),n("ekZX")),r=n("Bjia"),s=(n("tVxl"),n("1pSt"),a.a.memo((t=>{var e=t.demos,n=e["drag-demo"].component,l=e["drag-demo-1"].component;return a.a.createElement(a.a.Fragment,null,a.a.createElement(a.a.Fragment,null,a.a.createElement("div",{className:"markdown"},a.a.createElement("h2",{id:"\u901a\u7528\u62d6\u62fd"},a.a.createElement(o["AnchorLink"],{to:"#\u901a\u7528\u62d6\u62fd","aria-hidden":"true",tabIndex:-1},a.a.createElement("span",{className:"icon icon-link"})),"\u901a\u7528\u62d6\u62fd"),a.a.createElement("hr",null),a.a.createElement("ol",null,a.a.createElement("li",null,"\u57fa\u4e8e\u5750\u6807\u7cfb")),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5728\u9875\u9762\u4e2d\u7684\u5143\u7d20\u3001\u9f20\u6807\u7b49\uff0c\u5b83\u4eec\u7684\u4f4d\u7f6e\u4fe1\u606f\u90fd\u662f\u5df2\u77e5\u7684\uff0c\u800c\u8fd9\u4e9b\u4fe1\u606f\u90fd\u662f\u57fa\u4e8e\u9875\u9762\u4e2d\u7684\u4e00\u4e2a\u5750\u6807\u7cfb(\u4e5f\u5c31\u662fx\u3001y\u3001z\u6240\u7ec4\u6210\u7684)\u6765\u786e\u5b9a\u7684"),a.a.createElement("li",null,"\u4ece\u62d6\u62fd\u7684\u89d2\u5ea6\u6765\u8bf4\uff0c\u5c31\u662f\u4ece\u4e00\u4e2a\u4f4d\u7f6e\u79fb\u52a8\u5230\u53e6\u4e00\u4e2a\u4f4d\u7f6e\uff0c\u800c\u4e00\u822c\u60c5\u51b5\u4e0b\u5143\u7d20\u7684\u4f4d\u7f6e\u662f\u6839\u636e\u5b83\u7684\u6837\u5f0f\u662f\u56fa\u5b9a\u7684\uff0c\u5982\u679c\u60f3\u8981\u5b83\u79fb\u52a8\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u9f20\u6807\u6309\u4e0b(\u76ee\u6807\u5143\u7d20) -> \u9f20\u6807\u79fb\u52a8(\u76ee\u6807\u5143\u7d20\u8ddf\u968f\u79fb\u52a8) -> \u9f20\u6807\u62ac\u8d77(\u505c\u6b62\u79fb\u52a8)"),a.a.createElement("li",null,"\u90a3\u4e48\uff0c\u672c\u8d28\u4e0a\u6539\u53d8\u7684\u5c31\u662f\u5143\u7d20\u7684\u4f4d\u7f6e\u4fe1\u606f(\u4e00\u822c\u662fx\u3001y)\u3002\u8fd9\u91cc\u9762\u7684\u5df2\u77e5\u4fe1\u606f\u6709\uff1a",a.a.createElement("em",null,"\u9f20\u6807\u79fb\u52a8\u7684x\u8f74\u3001y\u8f74\u4fe1\u606f"),"\u3001",a.a.createElement("em",null,"\u62d6\u62fd\u5143\u7d20\u7684\u4f4d\u7f6e\u4fe1\u606f"),"\uff0c\u90a3\u4e48\u5176\u4e2d\u62d6\u62fd\u5143\u7d20\u7684\u79fb\u52a8\u8ddd\u79bb\u7684\u53d8\u5316\u7387\u5c31\u7b49\u4e8e\u9f20\u6807\u7684\u4f4d\u7f6e\u7684\u53d8\u5316\u7387"))),a.a.createElement(i["default"],e["drag-demo"].previewerProps,a.a.createElement(n,null)),a.a.createElement("div",{className:"markdown"},a.a.createElement("ol",{start:2},a.a.createElement("li",null,"\u591a\u4e2a\u5143\u7d20\u7684\u62d6\u62fd")),a.a.createElement("ul",null,a.a.createElement("li",null,"\u5982\u679c\u8981\u6d89\u53ca\u5230\u591a\u4e2a\u5143\u7d20\u7684\u62d6\u62fd\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5c01\u88c5\u4e00\u5957\u901a\u7528\u7684\u903b\u8f91\uff0c\u5e76\u4e14\u5176\u4e2d\u8fd8\u6d89\u53ca\u5230\u6bcf\u6b21\u9009\u62e9\u67d0\u4e2a\u5143\u7d20\u8fdb\u884c\u62d6\u62fd\u65f6\uff0c\u8be5\u5143\u7d20\u4e0e\u5176\u4ed6\u5143\u7d20\u7684\u5c42\u7ea7\u5173\u7cfb"),a.a.createElement("li",null,"\u5148\u6765\u5c01\u88c5\u4e00\u4e2a\u62d6\u62fd\u7c7b\uff0c\u5b83\u63a5\u6536\u4e24\u4e2a\u53c2\u6570\uff0c\u4e00\u4e2a\u662f\u62d6\u62fd\u533a\u57df\u7684 dom \u8282\u70b9\uff0c\u53e6\u4e00\u4e2a\u662f\u521d\u59cb\u5316\u65f6\u751f\u6210\u51e0\u4e2a\u5b50\u7ea7\u5143\u7d20"),a.a.createElement("li",null,"\u4f4d\u7f6e\u76f8\u5173\u7684\u5c5e\u6027\u653e\u5728\u5b9e\u4f8b\u5c5e\u6027\u4e0a\uff0c\u5b83\u662f\u5b9e\u4f8b\u72ec\u6709\u7684(\u8bb0\u5f55\u6bcf\u4e2a\u8282\u70b9\u5f53\u524d\u7684\u4f4d\u7f6e\u4fe1\u606f)\u3002\u5c42\u7ea7\u5173\u7cfb(count)\uff0c\u6bcf\u70b9\u51fb\u4e00\u4e2a\u5c31\u8981\u53bb\u6539\u53d8\u5b83\uff0c\u76f8\u4e92\u5173\u7cfb\u662f\u5171\u4eab\u7684\u3002count \u59cb\u7ec8\u662f\u6700\u5927\u503c(\u5171\u4eab)\uff0c\u6bcf\u4e2a\u5143\u7d20\u6709\u81ea\u5df1\u7684\u72ec\u7acb\u7684\u5c42\u7ea7\u3002\u6bcf\u5f53\u8981\u79fb\u52a8\u4e00\u4e2a\u5143\u7d20\u65f6\uff0c\u5c31\u5c06 count++\uff0c\u7136\u540e\u7ed9\u5f53\u524d\u79fb\u52a8\u7684\u5143\u7d20\u8be5\u5c42\u7ea7\u5373\u53ef(\u5373\u5f53\u524d\u5b9e\u4f8b\u6700\u9ad8\u7684\u90a3\u4e00\u4e2a)"),a.a.createElement("li",null,"\u5b9e\u4f8b\u5316\u62d6\u62fd\u5bf9\u8c61\u7684\u65f6\u5019\uff0c\u9700\u8981\u5173\u6ce8\u90a3\u4e9b\u662f\u9700\u8981\u505a\u7684\uff0c\u90a3\u4e9b\u662f\u4e0d\u9700\u8981\u505a\u7684")),a.a.createElement(r["a"],{code:"let zIndex = 0;\n\nclass DragElement {\n\tconstructor(container,childlen) {\n\t\t// \u83b7\u53d6\u7236\u7ea7\u533a\u57dfdom\u8282\u70b9\n\t\tthis.container = document.querySelector(container);\n\n\t\t// \u751f\u6210\u5b50\u7ea7\u62d6\u62fd\u5143\u7d20\n\t\tthis.createElement(childlen);\n\n\t\t// \u4fdd\u5b58\u6240\u6709\u7684\u62d6\u62fd\u5b50\u7ea7\u5143\u7d20\n\t\tthis.nodeList = Array.from(this.container.children);\n\n\t\t// \u83b7\u53d6\u62d6\u62fd\u533a\u57df\u7684\u8fb9\u754c\u503c\n\t\tthis.offsetLeft = this.container.offsetLeft;\n\t\tthis.offsetTop = this.container.offsetTop;\n\n\t\t// \u521d\u59cb\u5316\u7ed1\u5b9a\u4e8b\u4ef6\n\t\tthis.init()\n\t}\n\n\tcreateElement(len,type) {\n\n\t}\n\n\tinit() {\n\n\t}\n\n}",lang:"js"}),a.a.createElement("ul",null,a.a.createElement("li",null,"\u63a5\u4e0b\u6765\u6765\u5b8c\u6210\u5176\u4e2d\u521b\u5efa\u5143\u7d20\u7684\u65b9\u6cd5")),a.a.createElement(r["a"],{code:'function randColor() {\n\treturn `rgb(${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)}, ${Math.floor(Math.random() * 256)})`\n}\n\nclass DragElement {\n\t// ...\n\tcreateElement(len) {\n\t\tconst fragElement = document.createDocumentFragment();\n\n\t\tfor(let i = 0;i<len;i++) {\n\t\t\tconst child = document.createElement("div");\n\t\t\tchild.className = `dragEle dragEle--${i}`;\n\t\t\tchild.style.backgroundColor = randColor();\n\t\t\tchild.style.top = i * 30 + \'px\';\n\t\t\tchild.style.cursor = "pointer";\n\t\t\tchild.style.userSelect = "none";\n\t\t\tfragElement.appendChild(child);\n\t\t}\n\n\t\tthis.container.appendChild(fragElement);\n\t\t// this.nodeList = Array.from(this.container.children);\n\t}\n}',lang:"js"}),a.a.createElement("ul",null,a.a.createElement("li",null,"\u518d\u6765\u5b8c\u6210\u521d\u59cb\u5316\u7ed1\u5b9a\u4e8b\u4ef6\u7684\u65b9\u6cd5\uff0c\u9700\u8981\u7ed9\u6bcf\u4e00\u4e2a\u751f\u6210\u7684\u5b50\u5143\u7d20\u7ed1\u5b9a\u9f20\u6807\u6309\u4e0b\u4e8b\u4ef6\uff0c\u5148\u6765\u5b8c\u6210\u8be5\u65b9\u6cd5")),a.a.createElement(r["a"],{code:'let zIndex = 0;\nlet mousemoveListener = null;\nlet mousedownListener = [];\nlet mouseupListener = null;\n\nclass DragElement {\n\t// ...\n\tonMouseMove(node, event) {\n\t\t// \u83b7\u53d6\u5143\u7d20\u5e94\u79fb\u52a8\u7684\u8ddd\u79bb\n\t\tlet x = event.pageX - this.startX - this.offsetLeft;\n\t\tlet y = event.pageY - this.startY - this.offsetTop;\n\t\t\n\t\t// \u5904\u7406\u8fb9\u754c\u6761\u4ef6\n\t\tlet maxX = this.container.clientWidth - node.clientWidth;\n\t\tlet maxY = this.container.clientHeight - node.clientHeight;\n\n\t\tif (x <= 0) x = 0;\n\t\tif (y <= 0) y = 0;\n\t\tif (x >= maxX) x = maxX;\n\t\tif (y >= maxY) y = maxY;\n\n\t\tnode.style.top = y + \'px\';\n\t\tnode.style.left = x + \'px\';\n\t}\n\n\tonMouseDown(node, event) {\n\t\t// \u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u8bb0\u5f55\u9f20\u6807\u70b9\u5728\u5143\u7d20\u7684\u54ea\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u6837\u5c31\u4e0d\u7528\u8bb0\u5f55\u4e0a\u4e00\u4e2a\u9f20\u6807\u7684\u4f4d\u7f6e\u4fe1\u606f\u4e86\n\t\tthis.startX = event.pageX - this.offsetLeft - node.offsetLeft;\n\t\tthis.startY = event.pageY - this.offsetTop - node.offsetTop;\n\n\t\t// \u6bcf\u6b21\u9009\u4e2d\u90a3\u4e2a\u5143\u7d20\uff0c\u5c31\u5c06 zIndex \u5c5e\u6027+1\uff0c\u8fd9\u6837\u6bcf\u6b21\u9009\u4e2d\u7684\u5143\u7d20\u5c42\u7ea7\u90fd\u662f\u6bd4\u5176\u4ed6\u5144\u5f1f\u8282\u70b9\u9ad8\u7684\n\t\tnode.style.zIndex = ++zIndex;\n\n\t\t// \u7ed1\u5b9a\u9f20\u6807\u79fb\u52a8\u4e8b\u4ef6\n\t\tmousemoveListener = this.onMouseMove.bind(this, node);\n\t\tdocument.addEventListener("mousemove", mousemoveListener);\n\t}\n\n\tinit() {\n\t\tlet children = this.container.children;\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tlet mousedownCallback = this.onMouseDown.bind(this, children[i]);\n\t\t\tmousedownListener.push(mousedownCallback);\n\t\t\t// \u65b9\u4fbf\u7edf\u4e00\u8fdb\u884c\u89e3\u7ed1\u64cd\u4f5c\n\t\t\tchildren[i].addEventListener("mousedown", mousedownCallback)\n\t\t}\n\n\t\tmouseupListener = () => {\n\t\t\tdocument.removeEventListener("mousemove", mousemoveListener)\n\t\t}\n\n\t\tdocument.addEventListener("mouseup", mouseupListener);\n\n\t}\n}',lang:"js"}),a.a.createElement("ul",null,a.a.createElement("li",null,"\u73b0\u5728\u5df2\u7ecf\u53ef\u4ee5\u8fdb\u884c\u591a\u5143\u7d20\u7684\u62d6\u62fd\u4e86\uff0c\u5e76\u4e14\u5c42\u7ea7\u5173\u7cfb\u4e5f\u5df2\u5904\u7406\u597d\uff0c\u4f46\u73b0\u5728\u53ea\u80fd\u521d\u59cb\u5316\uff0c\u800c\u4e0d\u80fd\u540e\u7eed\u6dfb\u52a0\uff1b\u540c\u65f6\u5143\u7d20\u7684\u8fb9\u754c\u53ef\u4ee5\u521d\u59cb\u5316\u7684\u65f6\u5019\u5b58\u50a8\u8d77\u6765\uff0c\u53ea\u9700\u8981\u5728\u79fb\u52a8\u7684\u65f6\u5019\u53bb\u53d6\u5c31\u53ef\u4ee5\u4e86")),a.a.createElement(r["a"],{code:'const maxMapping = {};\nclass DragElement {\n\t// ...\n\tonMouseMove(node, event) {\n\t\t// \u83b7\u53d6\u5143\u7d20\u5e94\u79fb\u52a8\u7684\u8ddd\u79bb\n\t\tlet x = event.pageX - this.startX - this.offsetLeft;\n\t\tlet y = event.pageY - this.startY - this.offsetTop;\n\t\t\n\t\t// \u5904\u7406\u8fb9\u754c\u6761\u4ef6\n\t\tconst [maxX,maxY] = maxMapping[node.className];\n\n\t\tif (x <= 0) x = 0;\n\t\tif (y <= 0) y = 0;\n\t\tif (x >= maxX) x = maxX;\n\t\tif (y >= maxY) y = maxY;\n\n\t\tnode.style.top = y + \'px\';\n\t\tnode.style.left = x + \'px\';\n\t}\n\tinit() {\n\t\tlet children = this.container.children;\n\t\tfor (let i = 0; i < children.length; i++) {\n\t\t\tlet className = children[i].className;\n\t\t\tif (!maxMapping[className]) maxMapping[className] = [0, 0];\n\t\t\tmaxMapping[className] = [\n\t\t\t\tthis.container.clientWidth - children[i].clientWidth,\n\t\t\t\tthis.container.clientHeight - children[i].clientHeight\n\t\t\t];\n\t\t\tlet mousedownCallback = this.onMouseDown.bind(this, children[i]);\n\t\t\tmousedownListener.push(mousedownCallback);\n\t\t\t// \u65b9\u4fbf\u7edf\u4e00\u8fdb\u884c\u89e3\u7ed1\u64cd\u4f5c\n\t\t\tchildren[i].addEventListener("mousedown", mousedownCallback)\n\t\t}\n\n\t\tmouseupListener = () => {\n\t\t\tdocument.removeEventListener("mousemove", mousemoveListener)\n\t\t}\n\n\t\tdocument.addEventListener("mouseup", mouseupListener);\n\n\t}\n\n\tcreateElement(len,type) {\n\t\tconst fragElement = document.createDocumentFragment();\n\n\t\tlet startIdx = type === "add" ? this.nodeList.length : 0;\n\t\tlet endIdx = type === "add" ? (startIdx + len) : len;\n\n\t\tfor(let i = startIdx;i < endIdx;i++) {\n\t\t\tconst child = document.createElement("div");\n\t\t\tchild.className = `dragEle dragEle--${i}`;\n\t\t\tchild.style.backgroundColor = randColor();\n\t\t\tchild.style.top = i * 30 + \'px\';\n\t\t\tchild.style.cursor = "pointer";\n\t\t\tchild.style.userSelect = "none";\n\t\t\tfragElement.appendChild(child);\n\t\t}\n\n\t\tthis.container.appendChild(fragElement);\n\t\ttype === add && (this.nodeList = Array.from(this.container.children));\n\t}\n\n\tunBind() {\n\t\tdocument.removeEventListener("mouseup",mouseupListener);\n\n\t\tconst children = this.nodeList;\n\n\t\tfor(let i = 0;i< children.length;i++) {\n\t\t\tchildren[i].removeEventListener("mousedown",mousedownListener[i])\n\t\t}\n\n\t\tmousedownListener = []\n\t}\n\n\tappendElement(len = 1) {\n\t\tthis.createElement(len,"add");\n\t\tthis.unBind();\n\t\tthis.init()\n\t}\n}',lang:"js"}),a.a.createElement("ol",{start:3},a.a.createElement("li",null,"\u5b8c\u6574\u6548\u679c"))),a.a.createElement(i["default"],e["drag-demo-1"].previewerProps,a.a.createElement(l,null))))})));e["default"]=t=>{var e=a.a.useContext(o["context"]),n=e.demos;return a.a.useEffect((()=>{var e;null!==t&&void 0!==t&&null!==(e=t.location)&&void 0!==e&&e.hash&&o["AnchorLink"].scrollToAnchor(decodeURIComponent(t.location.hash.slice(1)))}),[]),a.a.createElement(s,{demos:n})}}}]);